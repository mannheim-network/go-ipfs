#!/bin/sh

set -e

PKG="$1"

PWD="$(realpath "$(pwd)")"
GOPATH="$(go env GOPATH)"

for p in IFS=: "${GOPATH}"; do
    if [ "$PWD" = "$(realpath "$p")/src/$PKG" ]; then
        exit 0
    fi
done

echo "go-ipfs must be built from within your \$GOPATH directory."
echo "expected within '$GOPATH' but got '$PWD'"
exit 1
